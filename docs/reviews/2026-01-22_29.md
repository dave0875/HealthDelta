# Review — Issue 29 (2026-01-22)

Issue: https://github.com/dave0875/HealthDelta/issues/29

Reviewer model
- `ollama/llama3.1:8b` (invoked locally on GORF)

Change summary
- Added CLI commands:
  - `healthdelta identity review` (deterministic listing of unverified links)
  - `healthdelta identity confirm --link <link_id>` (deterministic update to `user_confirmed`)
- `link_id` is computed as `sha256(system_fingerprint + ':' + source_patient_id)` and is not stored in files.

Findings
- Correctness: Confirm updates exactly the targeted link and is idempotent on rerun.
- Determinism: Review output is sorted by `link_id`; confirm writes `person_links.json` with deterministic link ordering and no timestamps.
- Privacy: Output contains no names/DOBs and avoids reading other identity artifacts; tests assert banned tokens are not printed.

Risks / edge cases
- `person_links.json` with malformed entries is silently skipped by review; confirm returns “not found” if computed IDs are missing.
- No adversarial integrity guarantees: a local operator can still edit `person_links.json` manually; this CLI is for auditability and workflow discipline.

Follow-ups (not in scope)
- Add optional `identity reject` / “needs review” workflow and/or record a deterministic confirmation log separate from `person_links.json`.


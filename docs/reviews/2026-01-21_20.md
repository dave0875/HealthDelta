# Review: Issue #20 — NDJSON validation command

Reviewed with: `ollama/llama3.1:8b`

Issue: https://github.com/dave0875/HealthDelta/issues/20

## Summary
- Added a deterministic, streaming-safe NDJSON validator: `healthdelta export validate --input <ndjson_dir>`.
- Validator enforces newline-delimited JSON objects and baseline required keys across streams.
- Added optional banned token/pattern checks to support synthetic fixtures and guard against share-safety regressions.

## Risks / Gaps
- [severity: low] The validator currently enforces only baseline keys; stream-specific schema checks can be layered later without breaking this contract.
- [severity: low] Banned token/pattern checks are opt-in; they are intended for synthetic tests and cannot reliably detect unknown PII in real datasets.

## Determinism + privacy checks
- Deterministic file ordering (sorted relative paths) and deterministic error ordering.
- No attempt to “discover” PII; banned token/pattern options are explicitly test-fixture guardrails.
- Error output includes only relative file paths under `--input` and line numbers (share-safe).

## CI / artifacts checklist
- Confirm CI green:
  - Linux tests job
  - macOS Xcode job with `ios-xcresult` artifact
- Post Actions run URL on Issue #20 and close the issue after verification.


# Review — 2026-01-19 — Issue #2

Model: `ollama/llama3.1:8b`

## Scope
Establish mandatory CI workflows with artifact-based proof:
- Linux headless tests on `ubuntu-latest`
- Xcode simulator tests on self-hosted MacBook Pro runner (`self-hosted`, `macOS`, `xcode`)
- Manual device smoke workflow
- Runbook + ADR documenting runner rationale

## Acceptance Criteria
- `ci.yml` runs on push/PR and Linux job executes headless tests deterministically: met (`python3 -m unittest discover ...`).
- `ci.yml` macOS job runs `xcodebuild test` on iPhone Simulator and uploads `.xcresult`: implemented; proof pending (runner currently not executing the job).
- Workflow run shows pass/fail per job and exposes artifacts: implemented; proof pending for macOS artifacts.
- `docs/runbook_xcode.md` documents runner setup, Xcode requirements, simulator runtimes, and re-running workflows: met.
- `AGENTS.md` references the runbook: met.
- `.codex/` includes prompt + session + ADR for CI constraints and runner rationale: met.

## CI Proof (Current Status)
- CI run: https://github.com/dave0875/HealthDelta/actions/runs/21147697604
  - Linux job: succeeded
  - macOS (self-hosted) job: queued (suggests runner is offline, mis-labeled, or unavailable)

## Risks / Gaps
- Self-hosted runner reliability is now a gating dependency for merges; if the runner is offline, PR CI cannot complete.
- Tooling dependency: workflows expect `xcodegen` (installed or installable via Homebrew); if missing, mac job fails fast (documented).
- JUnit export is best-effort: `xcpretty` is optional and must be installed on the runner for `artifacts/junit.xml`.

## Next Steps
- Bring the MacBook Pro runner online with labels `self-hosted`, `macOS`, `xcode`, then re-run `CI` and confirm:
  - `.xcresult` is uploaded (`ios-xcresult` artifact)
  - `xcodebuild.log` is uploaded
  - Optional `junit.xml` appears if `xcpretty` is installed


# Review â€” Issue 34 (2026-01-22)

Issue: https://github.com/dave0875/HealthDelta/issues/34

Reviewer model
- `ollama/llama3.1:8b` (invoked locally on GORF)

Change summary
- Added `CanonicalPersonIDStore` to persist a per-install UUID canonical person identifier (file-backed; newline-terminated).
- Updated `IncrementalNDJSONExporter` to include `canonical_person_id` on every NDJSON row via an injectable provider.
- Added unit tests for store stability/UUID parsing and exporter row inclusion.

Findings
- Acceptance criteria: Met (persisted UUID; exporter includes the field; tests cover stability and presence).
- Determinism: Exporter tests remain byte-stable by injecting a fixed ID provider; production uses a persisted ID (stable per install after first creation).
- Privacy: ID is not derived from PII/device identifiers; no logging added.

Risks / edge cases
- If app data is cleared, a new canonical person ID will be generated on next launch; downstream consumers should treat this as a new person identity for that install.
- Concurrent writers to the same file are unlikely in the app but not explicitly synchronized; if needed later, add a file lock/serialization layer.

Follow-ups (not in scope)
- Consider moving storage to Keychain if a stronger local security posture is required for the persisted identifier.


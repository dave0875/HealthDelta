# Review: Issue #21 — Share bundle packaging

Reviewed with: `ollama/llama3.1:8b`

Issue: https://github.com/dave0875/HealthDelta/issues/21

## Summary
- Added a deterministic, share-safe bundler: `healthdelta share bundle --run <base_out>/<run_id> --out <path>.tar.gz`.
- Bundle uses an explicit allowlist (`deid/`, `ndjson/`, `duckdb/`, `reports/`, `note/`) and excludes `staging/` and `identity/`.
- Included a share-safe `registry/run_entry.json` snippet that omits free-text `notes`.

## Risks / Gaps
- [severity: low] Determinism is “as feasible”: if upstream tools generate non-deterministic bytes inside artifacts, the bundle will faithfully reflect that.
- [severity: low] Registry snippet is derived from the local registry if present; ensure future registry fields remain share-safe (avoid raw paths and free-text).

## Determinism + privacy checks
- Normalizes gzip header and tar metadata; member ordering is stable.
- Tests ensure banned synthetic tokens do not appear in the archive bytes and that excluded directories are not present.

## CI / artifacts checklist
- Confirm CI green:
  - Linux tests job
  - macOS Xcode job with `ios-xcresult` artifact
- Post Actions run URL on Issue #21 and close the issue after verification.

